<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=ISO-8859-1">
  <title>OSS Common API v 1.3, Reference Implementation</title>
</head>
<body style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 0);"
 alink="#333366" link="#594fbf" vlink="#1005fb">
<table style="color: rgb(255, 255, 255);" border="0" cellspacing="4"
 width="100%">
  <tbody>
    <tr>
      <td align="right" bgcolor="#594fbf" valign="top"><b>OSS/J
Reference Implementation</b></td>
    </tr>
  </tbody>
</table>
<blockquote>
  <h1><b>OSS/J
Reference Implementation </b></h1>
  <p>This document describes how
to utilize the OSS/J Reference Implementation (RI) in conjunction
with the Application Server.</p>
  <p>This application document
contains the following sections: </p>
  <ul>
    <li><a href="#Overview">Overview</a> </li>
    <li><a href="#Compiling%20and%20Assembling%20the%20Application">Compiling
and
Assembling the OSS/J
RI&nbsp;</a> </li>
    <li><a href="#Deploying_the_RI_">Deploying the
RI</a></li>
    <li><a href="#Troubleshooting">Troubleshooting</a></li>
    <p> </p>
  </ul>
  <h2><a name="Overview"></a>Overview </h2>
  <hr noshade="noshade" size="2"> <br>
  <p>The following
instructions describe how to assemble, deploy
to the
Application Server, and how to access the EJB.&nbsp; </p>
  <p>The following
instructions also describe also how to configure the
JMS resources used by the RI.<br>
  </p>
  <h3> Setting up the
environment </h3>
  <p>Note that he Application Server will automatically
manage the JMS broker. </p>
  <h2><a name="Compiling and Assembling the Application"></a>Compiling
and
Assembling the
Application </h2>
  <hr noshade="noshade" size="2"> <br>
  <p>This Command Line Based
Compilation and Assembly procedure
describes how to assemble and compile the application using a Command
Line
Interface
(CLI).<br>
  </p>
  <table style="width: 85%; text-align: left;" border="1"
 cellpadding="5" cellspacing="0">
    <tbody>
      <tr>
        <td
 style="background-color: rgb(255, 255, 204); vertical-align: top;">
        <p style="font-weight: bold;">Prerequisite:<br>
        </p>
        <ul>
          <li>Add &lt;<i>j2ee
sdk 1.4 install_dir</i>&gt;<code>/bin</code> to your path</li>
          <li>edit the <span style="font-style: italic;">&lt;install_dir&gt;/src/build.xml</span>
and change the path to the common-ant.xml file<br>
          </li>
        </ul>
        </td>
      </tr>
    </tbody>
  </table>
  <h3>Command Line
Based
Compilation and Assembly <br>
  </h3>
  <p> <b>To rebuild the
entire
application from scratch: <br>
  </b></p>
  <ol>
    <li>
      <p>Compile and Assemble</p>
    </li>
    <ul>
      <li>
        <p>Execute
the "<code style="font-weight: bold;">asant compile
ear</code>" command
under &lt;<span style="font-style: italic;">install_dir</span>&gt;<code>/src/</code></p>
      </li>
      <li>
        <p> The
default target core
is executed to rebuild the .ear file. </p>
      </li>
    </ul>
    <li>
      <p>Deploy the application.</p>
    </li>
    <ul>
      <li>
        <p>When
you have
re-created the RI from scratch, proceed to <a href="#Deploying_the_RI_">Deploying
the application</a>.</p>
      </li>
    </ul>
    <li>
      <p>Clean the RI project area.</p>
    </li>
    <ul>
      <li>
        <p> Execute
the "<code style="font-weight: bold;">asant clean</code>"
command
to
remove the RI's assemble and build directories.<br>
        </p>
      </li>
    </ul>
  </ol>
</blockquote>
<blockquote>
  <h2><a name="Deploying_the_RI_"></a>Deploying
the RI </h2>
  <hr noshade="noshade" size="2"> <br>
  <p>Command Line
Based Deployment
describes how to manually register the application in a Application
Server using a Command Line Interface (CLI). This is the fastest means
of deploying the application.<br>
  </p>
  <h3> Prerequisites to
deployment. </h3>
  <hr noshade="noshade" size="2">
  <p>Start the application Server using the command "<code
 style="font-weight: bold;">asadmin
start-domain</code>" </p>
  <h3>Command
Line
Based Deployment </h3>
</blockquote>
<blockquote>
  <p> Since a complete .ear file is
supplied, the fastest means of setting up the application is to use the
command line utilities as described in this section. </p>
  <p> The pre-built oss_common_ri_ear-1.3.ear file is an Enterprise Archive file
that contains
the Java Archive (JAR) files of the application.<br>
  </p>
  <p><span style="font-weight: bold;"> Deploy using
the asant
script</span>:</p>
  <ol type="1">
    <li value="1">
      <p>Go to the
src directory: &lt;<span style="font-style: italic;">install_dir</span>&gt;<code>/src</code></p>
    </li>
    <li value="2">
      <p>Execute the
"<code style="font-weight: bold;">asant deploy</code>" command. This
will configure and deploy the
RI
to
the Application server.</p>
    </li>
  </ol>
  <p><span style="font-weight: bold;">NOTE</span>: For build,
configuration or re-deployment
the following command could
be used independently<br>
  </p>
  <table align="center" border="1" cellpadding="5" width="71%">
    <tbody>
      <tr bgcolor="#cccccc">
        <td width="12%">Target</td>
        <td width="88%">Function</td>
      </tr>
      <tr>
        <td width="12%">compile</td>
        <td width="88%">Compiles all Java source code.</td>
      </tr>
      <tr>
        <td width="12%">ear</td>
        <td width="88%">Assembles the EAR file in
&lt;<span style="font-style: italic;">install_dir</span>&gt;<code>/assemble/ear/</code>.</td>
      </tr>
      <tr>
        <td width="12%">core
(default)</td>
        <td width="88%">Compiles all sources, builds stubs/skeletons
and assembles EJB[tm] JAR, WAR and EAR files. This is the
default target for all build.xml
files shipped in the application server.</td>
      </tr>
      <tr>
        <td width="12%">javadocs</td>
        <td width="88%">Creates Java docs in
&lt;<span style="font-style: italic;">install_dir</span>&gt;<code>/javadocs</code></td>
      </tr>
      <tr>
        <td height="18" width="12%">deploy</td>
        <td height="18" width="88%">Registers resources, deploys
app, but does not install Javadocs.</td>
      </tr>
      <tr>
        <td width="12%">deploy_ear</td>
        <td width="88%">Application deployment only. No resource
registration.</td>
      </tr>
      <tr>
        <td width="12%">undeploy</td>
        <td width="88%">Removes the deployed application from
application server and remove resources.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;">undeploy_ear<br>
        </td>
        <td style="vertical-align: top;">Removes the deployed
application from application server</td>
      </tr>
      <tr>
        <td width="12%">clean</td>
        <td width="88%">Removes &lt;<span style="font-style: italic;">appname</span>&gt;/build/
and &lt;<span style="font-style: italic;">appname</span>&gt;<code>/assemble/</code>
content.</td>
      </tr>
      <tr>
        <td style="vertical-align: top;">setup<br>
        </td>
        <td style="vertical-align: top;">Configure the Application
server (create JDBC and JMS resources)<br>
        </td>
      </tr>
      <tr>
        <td style="vertical-align: top;">unsetup<br>
        </td>
        <td style="vertical-align: top;">Remove resources from the
Application server (delete JDBC and JMS resources)</td>
      </tr>
    </tbody>
  </table>
</blockquote>
<blockquote>
  <h3>Verifying Deployment</h3>
  <hr noshade="noshade" size="2">
  <p>As an optional step, you
can use the Application Server
Administration Tool to verify that the application has been registered.
  </p>
  <p>To verify the
registration
of the application: <br>
  </p>
  <ol type="1">
    <li>
      <p>Execute the
asadmin command to look at applications deployed with a server
instance. You see
oss_common_ri_ear-1.3.ear as one
of the listed applications.</p>
      <ul>
        <li value="1">
          <p><code><span style="font-weight: bold;">
C:\>asadmin list-components  --user &lt;<span style="font-style: italic;">user-name</span>&gt; --passwordfile <>\samples\password.txt<BR>
oss_common_ri &lt;j2ee-application&gt;<BR>
Command list-components executed successfully.
<BR>
</code></p>
        </li>
      </ul>
    </li>
    <li>
      <p>Or navigate the Admin tool GUI to Applications--&gt;Enterprise
Applications.&nbsp;</p>
      <ul>
        <li value="1">
          <p>Click Enterprise
Applications on the
left frame menu to display a list of applications deployed on the
server.<br>
          </p>
        </li>
      </ul>
    </li>
  </ol>
  <h3> Generating
Javadocs <br>
  </h3>
  <hr noshade="noshade" size="2">
  <p>To understand&nbsp;
application source code better, you can
refer to the related javadocs. To generate javadocs, run the command<br>
  </p>
  <ul style="font-weight: bold;">
    <li>
      <p><code>asant javadocs</code></p>
    </li>
  </ul>
After
javadocs are
generated, you can access them at &lt;<span style="font-style: italic;">install_dir</span>&gt;<code>/javadocs/index.html</code>
  <h2><a name="Troubleshooting"></a>Troubleshooting </h2>
  <hr noshade="noshade" size="2">
  <p>If you encounter problems
when running the application,
review the log files at &lt;<span style="font-style: italic;">j2ee sdk
1.4
install-dir</span>&gt;<code>/domains/</code>&lt;<span
 style="font-style: italic;">domain</span>&gt;<code>/logs/server.log</code>
to see what went wrong. </p>
  <p> Make certain
that you run "<code><span style="font-weight: bold;">asant
undeploy</span>"</code> before
redeploying this application to make sure that all modules are
undeployed
and the resources are disabled. </p>
</blockquote>
<blockquote> <br>
  <hr noshade="noshade" size="1"><!-- start copyright -->Copyright
&copy;
2002-2005 <a href="http://sun.com">Sun Microsystems, Inc.</a> All rights
reserved.<!--  end copyright  --></blockquote>
</body>
</html>
